<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿˜å¹´ä¼š ã‚¯ãƒ­ã‚¹BINGO</title>
    <style>
        /* å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 16px;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 500px;
            margin: auto;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 1.8rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            margin-bottom: 16px;
        }

        .rules {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .rules h2 {
            font-size: 1.2rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 12px;
        }

        .rules ul {
            margin: 0;
            padding-left: 20px;
            font-size: 1rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            color: #555;
            line-height: 1.6;
        }

        .rules li {
            margin-bottom: 6px;
        }

        .rules .notice {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 14px;
            margin-top: 12px;
            border-radius: 4px;
            font-size: 0.95rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            color: #856404;
            line-height: 1.6;
        }

        .rules .notice strong {
            font-size: 1.05rem;
        }

        /* BINGOãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .bingo-card {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .bingo-card td {
            width: 33.33%;
            padding-top: 33.33%;
            position: relative;
            border: 3px solid #f7f7f7;
            background-color: #ffffff;
            user-select: none;
            /* é”æˆæ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            transition: background-color 0.3s;
        }

        /* é”æˆã—ãŸãƒã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .bingo-card td.achieved {
            background-color: #ff9800; /* ã‚ªãƒ¬ãƒ³ã‚¸è‰² */
        }


        /* ãƒã‚¹ã®ä¸­èº«(ãƒ†ã‚­ã‚¹ãƒˆ)ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .cell-content {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            display: flex;
            /* è¦ç´ ã‚’ç¸¦ã«ä¸¦ã¹ã‚‹ */
            flex-direction: column;
            justify-content: space-around; /* ä¸Šä¸‹ã«å‡ç­‰é…ç½® */
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            cursor: default; /* ã‚¯ãƒªãƒƒã‚¯ä¸å¯ã«ã™ã‚‹ */
            text-align: center;
        }

        /* ãŠé¡Œã®ãƒ†ã‚­ã‚¹ãƒˆ */
        .task {
            font-size: 1.1rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            font-weight: bold;
            color: #333;
            line-height: 1.3;
        }
        
        /* é”æˆæ™‚ã®ãŠé¡Œãƒ†ã‚­ã‚¹ãƒˆ */
        .achieved .task {
            color: #fff;
            text-decoration: line-through;
        }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒªã‚¢ */
        .input-area {
            width: 95%;
            margin-top: 10px;
        }

        .name-input {
            width: 100%;
            font-size: 1rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            padding: 8px; /* ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã */
            margin-bottom: 6px;
            box-sizing: border-box; /* paddingã‚’å«ã‚ã¦å¹…è¨ˆç®— */
            border: 2px solid #ccc;
            border-radius: 6px;
            text-align: center;
        }

        .name-input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        /* OKãƒœã‚¿ãƒ³ */
        .submit-btn {
            width: 100%;
            font-size: 1rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            font-weight: bold;
            padding: 10px; /* ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã */
            margin-top: 6px;
            border: none;
            border-radius: 6px;
            background-color: #3498db; /* é’è‰² */
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .submit-btn:hover {
            background-color: #2980b9;
        }
        .submit-btn:active {
            background-color: #21618c;
        }

        /* é”æˆå¾Œï¼šå…¥åŠ›ã‚¨ãƒªã‚¢ã‚’éè¡¨ç¤º */
        .achieved .input-area {
            display: none;
        }
        
        /* é”æˆå¾Œï¼šå…¥åŠ›ã•ã‚ŒãŸåå‰ã‚’è¡¨ç¤º */
        .achieved-name {
            display: none; /* é€šå¸¸ã¯éè¡¨ç¤º */
            margin-top: 8px;
            font-size: 1.1rem; /* ã‚¹ãƒãƒ›å‘ã‘ã«å¤§ãã */
            font-weight: bold;
            color: #ffffff;
            word-break: break-all; /* åå‰ãŒé•·ãã¦ã‚‚æ”¹è¡Œ */
            line-height: 1.4;
        }
        
        .achieved .achieved-name {
            display: block; /* é”æˆã—ãŸã‚‰è¡¨ç¤º */
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>å¿˜å¹´ä¼š ã‚¯ãƒ­ã‚¹BINGO</h1>
        
        <div class="rules">
            <h2>ğŸ® ãƒ«ãƒ¼ãƒ«èª¬æ˜</h2>
            <ul>
                <li>å„ãƒã‚¹ã«è¡¨ç¤ºã•ã‚ŒãŸãŠé¡Œã‚’é”æˆã—ãŸäººã‚’æ¢ã—ã¾ã—ã‚‡ã†</li>
                <li>é”æˆã—ãŸäººã®ä¼šç¤¾åã¨åå‰ã‚’å…¥åŠ›ã—ã¦ã€ŒOKã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ãƒã‚¹ãŒã‚ªãƒ¬ãƒ³ã‚¸è‰²ã«å¤‰ã‚ã‚Šã¾ã™</li>
                <li>ç¸¦ãƒ»æ¨ªãƒ»æ–œã‚ã®ã„ãšã‚Œã‹1åˆ—ãŒæƒã£ãŸã‚‰ã€ŒBINGOï¼ã€ã§ã™</li>
                <li>ä¸­å¤®ã®ãƒã‚¹ã¯ã€Œã‚¢ãƒ€ã‚¹ãƒˆãƒªã‚¢ãƒ–ãƒ©ãƒ³ãƒ‰ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’èº«ã«ç€ã‘ã¦ã„ã‚‹ã€ã§å›ºå®šã§ã™</li>
            </ul>
            <div class="notice">
                <strong>âš ï¸ ã”æ³¨æ„</strong><br>
                ãƒ“ãƒ³ã‚´å½“é¸å¾Œã«å„ãƒã‚¹ã®å†…å®¹ã¨æ›¸ã‹ã‚ŒãŸäººã®åå‰ã‚’èª­ã¿ä¸Šã’ã¦æ™¯å“ã‚’ã‚ãŸã™ã®ã§ã€åå‰ã‚’æ›¸ã‹ã‚Œã‚‹ã“ã¨ã®æ‰¿èªã‚’æœ¬äººã‹ã‚‰å¾—ã¦ãã ã•ã„ã€‚
            </div>
        </div>
        
        <table class="bingo-card">
            <!-- JavaScriptã§ <tbody> ã®ä¸­èº«ãŒç”Ÿæˆã•ã‚Œã¾ã™ -->
            <tbody id="bingo-body">
                <!-- 
                â†“ JavaScriptã«ã‚ˆã£ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹é€ ãŒãƒ©ãƒ³ãƒ€ãƒ ã«ç”Ÿæˆã•ã‚Œã¾ã™
                <tr>
                    <td>
                        <div class="cell-content">
                            <div class="task">ãŠé¡Œãƒ†ã‚­ã‚¹ãƒˆ</div>
                            <div class="input-area">
                                <input type="text" placeholder="åå‰" class="name-input">
                                <button class="submit-btn">OK</button>
                            </div>
                            <div class="achieved-name"></div>
                        </div>
                    </td>
                    ...
                </tr> 
                -->
            </tbody>
        </table>
    </div>

    <script>
        // DOMï¼ˆHTMLï¼‰ã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            
            // 1. BINGOã®ãŠé¡Œãƒªã‚¹ãƒˆ
            const tasks = [
                "ã‚´ãƒ«ãƒ•ãŒè¶£å‘³",
                "ã‚µã‚¦ãƒŠãŒå¥½ã",
                "å‹¤ç¶š20å¹´ä»¥ä¸Š",
                "é‡£ã‚ŠãŒå¥½ã",
                "ã‚¢ãƒ€ã‚¹ãƒˆãƒªã‚¢ãƒ–ãƒ©ãƒ³ãƒ‰ã®<br>ã‚¢ã‚¤ãƒ†ãƒ ã‚’èº«ã«ç€ã‘ã¦ã„ã‚‹",
                "å¾¡ç¤¾ï¼ˆãƒ›ã‚¹ãƒˆä¼æ¥­ï¼‰ã¨<br>ä¸€ç•ªä»˜ãåˆã„ãŒé•·ã„",
                "å‡ºèº«åœ°ãŒ<br>ä¹å·",
                "æœ€è¿‘<br>å­«ãŒç”Ÿã¾ã‚ŒãŸ",
                "ãƒ©ãƒ¼ãƒ¡ãƒ³ãŒ<br>é€±3ä»¥ä¸Šã§å¥½ã",
                "æ„›å¦»å®¶ã‚’<br>è‡ªèªã—ã¦ã„ã‚‹"
            ];

            // 2. ãŠé¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ï¼ˆFisher-Yatesã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // 3. BINGOã‚«ãƒ¼ãƒ‰ã‚’HTMLã¨ã—ã¦ç”Ÿæˆã™ã‚‹
            function createBingoCard() {
                const tbody = document.getElementById('bingo-body');
                tbody.innerHTML = ''; // ä¸­èº«ã‚’ãƒªã‚»ãƒƒãƒˆ
                
                // ä¸­å¤®ãƒã‚¹ï¼ˆ2è¡Œç›®ã€2åˆ—ç›®ï¼‰ã«å›ºå®šã™ã‚‹ãŠé¡Œ
                const centerTask = "ã‚¢ãƒ€ã‚¹ãƒˆãƒªã‚¢ãƒ–ãƒ©ãƒ³ãƒ‰ã®<br>ã‚¢ã‚¤ãƒ†ãƒ ã‚’èº«ã«ç€ã‘ã¦ã„ã‚‹";
                
                // ä¸­å¤®ãƒã‚¹ç”¨ã®ãŠé¡Œã‚’é™¤å¤–ã—ãŸãƒªã‚¹ãƒˆã‚’ä½œæˆ
                const tasksWithoutCenter = tasks.filter(task => task !== centerTask);
                // 8ã¤ã®ãŠé¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
                const shuffledTasks = shuffle([...tasksWithoutCenter]);
                
                let taskIndex = 0;
                for (let i = 0; i < 3; i++) { // 3è¡Œ
                    const tr = document.createElement('tr');
                    for (let j = 0; j < 3; j++) { // 3åˆ—
                        const td = document.createElement('td');
                        // ä¸­å¤®ãƒã‚¹ï¼ˆi=1, j=1ï¼‰ã®å ´åˆã¯å›ºå®šã®ãŠé¡Œã‚’ä½¿ç”¨
                        let taskText;
                        if (i === 1 && j === 1) {
                            taskText = centerTask;
                        } else {
                            taskText = shuffledTasks[taskIndex++];
                        }
                        
                        // aria-labelç”¨ã«<br>ã‚¿ã‚°ã‚’å‰Šé™¤ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆ
                        const taskTextForAria = taskText.replace(/<br>/g, ' ');
                        
                        // ãƒã‚¹ã®ä¸­èº«ã‚’HTMLã§æ§‹ç¯‰
                        td.innerHTML = `
                            <div class="cell-content">
                                <div class="task">${taskText}</div>
                                <div class="input-area">
                                    <input type="text" placeholder="ä¼šç¤¾å" class="name-input company-input" aria-label="${taskTextForAria} ã®ä¼šç¤¾å">
                                    <input type="text" placeholder="åå‰" class="name-input name-input-field" aria-label="${taskTextForAria} ã®åå‰">
                                    <button class="submit-btn">OK</button>
                                </div>
                                <div class="achieved-name"></div>
                            </div>
                        `;
                        tr.appendChild(td);
                    }
                    tbody.appendChild(tr);
                }
            }

            // 4. ã€ŒOKã€ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®šã™ã‚‹
            function setupEventListeners() {
                const bingoBody = document.getElementById('bingo-body');
                
                // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ï¼ˆtbodyå…¨ä½“ã§ã‚¯ãƒªãƒƒã‚¯ã‚’ç›£è¦–ï¼‰
                bingoBody.addEventListener('click', function(e) {
                    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã®ãŒ .submit-btn ã‹ã©ã†ã‹ã‚’åˆ¤å®š
                    if (e.target && e.target.classList.contains('submit-btn')) {
                        
                        // é–¢é€£ã™ã‚‹è¦ç´ ã‚’å–å¾—
                        const cell = e.target.closest('td'); // è¦ªã®td
                        const companyInput = cell.querySelector('.company-input');
                        const nameInput = cell.querySelector('.name-input-field');
                        const nameDisplay = cell.querySelector('.achieved-name');
                        
                        const company = companyInput.value.trim(); // å…¥åŠ›ã•ã‚ŒãŸä¼šç¤¾åï¼ˆç©ºç™½ã‚’é™¤å»ï¼‰
                        const name = nameInput.value.trim(); // å…¥åŠ›ã•ã‚ŒãŸåå‰ï¼ˆç©ºç™½ã‚’é™¤å»ï¼‰
                        
                        // ä¼šç¤¾åã¨åå‰ãŒä¸¡æ–¹å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿å‡¦ç†
                        if (company !== '' && name !== '') {
                            // ä¼šç¤¾åã¨åå‰ã‚’è¡¨ç¤ºï¼ˆæ”¹è¡Œã§åŒºåˆ‡ã‚‹ï¼‰
                            nameDisplay.innerHTML = `${company}<br>${name}`;
                            cell.classList.add('achieved'); // é”æˆã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸è‰²ï¼‰ã‚’é©ç”¨
                        } else {
                            // å…¥åŠ›ãŒä¸å®Œå…¨ãªå ´åˆã«ã‚¢ãƒ©ãƒ¼ãƒˆ
                            if (company === '' && name === '') {
                                alert('ä¼šç¤¾åã¨åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                            } else if (company === '') {
                                alert('ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                            } else {
                                alert('åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                            }
                        }
                    }
                });
            }

            // --- å®Ÿè¡Œ ---
            createBingoCard();    // ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
            setupEventListeners(); // ãƒœã‚¿ãƒ³ã®ç›£è¦–ã‚’é–‹å§‹
        });
    </script>

</body>
</html>

